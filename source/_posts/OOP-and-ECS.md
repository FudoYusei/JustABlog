---
title: OOP-and-ECS
author: fudoyusei
avatar: 'https://wx1.sinaimg.cn/large/006bYVyvgy1ftand2qurdj303c03cdfv.jpg'
authorLink: 'http://uath6h.coding-pages.com'
authorAbout: 一个好奇的人
authorDesc: 一个好奇的人
categories: 技术
comments: true
date: 2019-09-29 20:34:41
tags:
- DesignPattern
keywords:
description:
photos:
---

# OOP的发展
## 最初的OOP
**最初** OOP 提出来是将解决问题的算法抽象化成一个一个对象，每个对象管理自己的属性和行为，也就是现代编程语言中的类的属性和方法。

与此同时对象还要管理自己的生命周期，以C系语言为主，使用 new 创建对象，由于这个概念过于符合人的思维模式，反而隐藏了对象需要管理自己生命周期这一隐藏的因素。类中提供的构造方法，析构方法我们不需要显式调用，在Java C# 这类语言更是使用GC策略来进一步规避对象对内存的操作。

## 三层与DDD
三层架构跟随网络时代兴起，简单明了的分出UI BLL DAL三层，实质上就是 表现层、业务层和数据层/DataBase。网页不需要非常复杂的渲染逻辑（相对于游戏开发来说）而是专注于对于数据的各种形式的展示。由此重心转移到数据中，这在中小型项目中非常好用，开发效率非常高。在这种数据驱动代表的架构中，数据对象变成了失血域模型，也就是只有属性没有行为。

DDD（领域驱动）用于解决简单三层中随着项目扩展无比臃肿的业务层，以及通过读写分离来解决数据并发量问题。领域划分让对象重新回到充血域模型，领域对象通过行为和属性划分自己的边界，将原先业务层集中的所有的业务行为重新分离到各个领域中。另一方面领域模型中也能看到相关的业务逻辑。

# ECS
OOP的组件模式以及桥模式提倡少用继承多用聚合。其中一个好处就是架构比较薄，直观体现就是UML图是横向扩展。但是OOP天然的是纵向扩展，A类调用B类，B类调用C类，阅读代码的时候也是上上下下来回跳转。相对来说，过程化代码的好处就是直观明了。

ECS完全就是一个新的理念，面向切面编程，**相对于OOP，将算法抽象成一个个独立的对象，对象管理自己的属性和行为**。ECS抽象出算法中的行为，Entity就是切面的载体，Component是切面的数据，System是对切面的处理过程。

**ECS对于缓存十分友好，System只关心Component**，而不需要像OOP中，先要从对象开始，相同类的对象可以使用对象池技术，但是OOP最常见的就是不同类之间的调用。

